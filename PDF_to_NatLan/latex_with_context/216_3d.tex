For the closed cylinder, the energy balance is expressed as:  
\[
\Delta E = Q - W
\]  

The heat transfer is calculated as:  
\[
m_{\text{EW}} \cdot (u_2 - u_1) = Q
\]  

Rewriting:  
\[
Q + u_1 = u_2
\]  

Substituting values:  
\[
u_2 = -1861.77 \, \frac{\text{kJ}}{\text{kg}}
\]  
\[
u_1 = u_f + x(u_{\text{EW}} - u_f)
\]  
\[
u_1 = -200.38 \, \frac{\text{kJ}}{\text{kg}}
\]  

The ice fraction in state 2 is calculated as:  
\[
x_2 = \frac{u_2 - u_f}{u_{\text{EW}} - u_f}
\]  
\[
x_2 = 0.756
\]  

This concludes the calculation of the final ice fraction.