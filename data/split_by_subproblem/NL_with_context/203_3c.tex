First law of thermodynamics applied to the gas container:  
Delta E equals Q minus W equals Delta U.  

Q equals W plus U_2 minus U_1 equals W plus m_g times c_V times (T_2 minus T_1).  

Q equals p_g,1 times (V_2 minus V_1) plus m_g times c_V times (T_2 minus T_1).